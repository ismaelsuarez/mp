<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manual de Uso - MP</title>
  <style>
    :root{
      --bg:#0f172a;--panel:#111827;--muted:#94a3b8;--text:#e2e8f0;--b:#1f2937;--primary:#60a5fa;--accent:#34d399;
      --warn:#f59e0b;--rose:#fb7185;--shadow:0 10px 25px rgba(0,0,0,.25)
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;display:flex}
    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}
    /* Layout */
    .sidebar{width:290px;min-width:260px;background:var(--panel);border-right:1px solid var(--b);padding:18px;position:sticky;top:0;height:100vh;overflow:auto}
    .brand{font-weight:700;letter-spacing:.2px;color:#cbd5e1;margin-bottom:8px}
    .search{display:flex;gap:8px;margin:10px 0 14px}
    .search input{flex:1;background:#0b1220;color:var(--text);border:1px solid var(--b);border-radius:8px;padding:8px 10px}
    .chip{display:inline-block;font-size:11px;padding:2px 8px;border:1px solid var(--b);border-radius:999px;background:#0b1220;color:#cbd5e1}
    .nav{margin-top:6px}
    .nav h4{margin:14px 0 6px;font-size:12px;color:#cbd5e1;text-transform:uppercase;letter-spacing:.6px}
    .nav a{display:block;padding:8px 10px;border-radius:8px;color:#e2e8f0;border:1px solid transparent}
    .nav a:hover{background:#0b1220;border-color:var(--b)}
    .nav .sub{margin-left:8px}

    .content{flex:1;min-width:0;height:100vh;overflow:auto}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .hero{background:linear-gradient(180deg,rgba(96,165,250,.08),transparent);border:1px solid var(--b);border-radius:14px;padding:18px 18px;box-shadow:var(--shadow)}
    .hero h1{margin:0 0 6px;color:#bfdbfe}
    .muted{color:var(--muted);font-size:13px}

    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}

    .card{background:var(--panel);border:1px solid var(--b);border-radius:12px;padding:16px}
    .card h2{margin:0 0 6px;color:#bfdbfe}
    .list{margin:8px 0 0;padding-left:18px}
    .list li{margin:6px 0}
    .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .btn{background:#0b1220;border:1px solid var(--b);color:var(--text);padding:8px 10px;border-radius:8px;font-size:13px}
    .btn:hover{background:#0f1a33}
    .badge{display:inline-block;background:rgba(52,211,153,.12);border:1px solid rgba(52,211,153,.35);color:#a7f3d0;padding:2px 8px;border-radius:999px;font-size:11px;margin-left:6px}
    .warn{background:rgba(245,158,11,.12);border-color:rgba(245,158,11,.35);color:#fde68a}

    .toc{display:grid;gap:10px;margin-top:8px}
    .toc a{background:#0b1220;border:1px solid var(--b);padding:10px;border-radius:10px}
    .toc a:hover{background:#0f1a33}

    .footer{margin:30px 0;color:#64748b;font-size:12px}
    .kbd{font:inherit;background:#0b1220;border:1px solid var(--b);border-radius:6px;padding:2px 6px}
    .sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
  </style>
</head>
<body>
  <nav class="sidebar">
    <div class="brand">Manual de Uso – MP</div>
    <div class="search">
      <input id="q" placeholder="Buscar (ej. FTP, Automático, DBF)" />
    </div>
    <div class="nav" id="nav">
      <h4>General</h4>
      <a href="#intro">Introducción</a>
      <a href="RELEASE_NOTES.md" target="_blank">Notas de versión<span class="chip">docs</span></a>

      <h4>Modo Caja</h4>
      <div class="sub">
        <a href="#caja-descargar">Descargar MP</a>
        <a href="#caja-movimientos">Movimientos</a>
        <a href="#caja-auto">Indicador Automático</a>
        <a href="#caja-logs">Logs</a>
        <a href="#caja-config">Configuración rápida</a>
        <a href="#caja-tabs">Navegación</a>
        <a href="#caja-hoy">Badge “HOY”</a>
      </div>

      <h4>Administración</h4>
      <div class="sub">
        <a href="#cfg-mp">Mercado Pago</a>
        <a href="#cfg-email">Email / SMTP</a>
        <a href="#cfg-ftp">FTP</a>
        <a href="#cfg-auto">Automatización</a>
        <a href="#cfg-seg">Seguridad</a>
        <a href="#cfg-err">Notificaciones de Error</a>
        <a href="#cfg-result">Resultados</a>
        <a href="#cfg-hist">Historial</a>
        <a href="#cfg-acciones">Acciones principales</a>
        <a href="#cfg-about">Acerca de</a>
      </div>
    </div>
  </nav>

  <main class="content">
    <div class="container">
      <section id="intro" class="hero">
        <h1>Bienvenido</h1>
        <p class="muted">Esta guía resume cómo usar la aplicación en sus dos vistas: <strong>Modo Caja</strong> y <strong>Administración</strong>. Encontrarás enlaces de “Más detalle” a documentos específicos.</p>
        <div class="btns">
          <a class="btn" href="#caja">Ir a Modo Caja</a>
          <a class="btn" href="#admin">Ir a Administración</a>
          <a class="btn" href="RELEASE_NOTES.md" target="_blank">Notas de versión</a>
        </div>
      </section>

      <div class="grid cols-2" style="margin-top:18px" id="caja">
        <div class="card">
          <h2>Modo Caja</h2>
          <p class="muted">Operación diaria y rápida.</p>
          <div class="toc">
            <a href="#caja-descargar">1. Descargar MP</a>
            <a href="#caja-movimientos">2. Movimientos</a>
            <a href="#caja-auto">3. Indicador Automático</a>
            <a href="#caja-logs">4. Logs</a>
            <a href="#caja-config">5. Configuración rápida</a>
            <a href="#caja-tabs">6. Navegación</a>
            <a href="#caja-hoy">7. Badge “HOY”</a>
          </div>
        </div>
        <div class="card" id="admin">
          <h2>Administración</h2>
          <p class="muted">Configuración completa, automatización y análisis.</p>
          <div class="toc">
            <a href="#cfg-mp">Mercado Pago</a>
            <a href="#cfg-email">Email / SMTP</a>
            <a href="#cfg-ftp">FTP</a>
            <a href="#cfg-auto">Automatización</a>
            <a href="#cfg-seg">Seguridad</a>
            <a href="#cfg-err">Notificaciones de Error</a>
            <a href="#cfg-result">Resultados</a>
            <a href="#cfg-hist">Historial</a>
            <a href="#cfg-acciones">Acciones principales</a>
            <a href="#cfg-about">Acerca de</a>
          </div>
        </div>
      </div>

      <!-- CAJA -->
      <section id="caja-descargar" class="card">
        <h2>Descargar MP <span class="badge">Acción principal</span></h2>
        <p>Genera el reporte del día, crea archivos (CSV, XLSX, DBF, JSON) y actualiza la vista de resultados. Si FTP está configurado, envía <code>mp.dbf</code> automáticamente cuando hay cambios.</p>
        <ul class="list">
          <li>Flujo equivalente al botón “Descargar MP”.</li>
          <li>Archivos en <code>C:\2_mp\reportes</code> (o Documentos/MP-Reportes).</li>
        </ul>
        <div class="btns">
          <a class="btn" target="_blank" href="doc_modo_caja/CAJA_DESCARGAR_MP.md">Más detalle técnico</a>
        </div>
      </section>

      <section id="caja-movimientos" class="card">
        <h2>Movimientos</h2>
        <p>Tabla con operaciones del día y totales. Permite paginação y filtros rápidos.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_MOVIMIENTOS.md">Más detalle</a></div>
      </section>

      <section id="caja-auto" class="card">
        <h2>Indicador Automático</h2>
        <p>Muestra el estado del proceso automático. El modo <em>remoto</em> es autónomo y respeta intervalos/días/horas configurados.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_AUTO_INDICADOR.md">Más detalle</a></div>
      </section>

      <section id="caja-logs" class="card">
        <h2>Logs</h2>
        <p>Acceso rápido al log del día para diagnóstico.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_LOGS.md">Más detalle</a></div>
      </section>

      <section id="caja-config" class="card">
        <h2>Configuración rápida</h2>
        <p>Acceso directo a la vista de Administración para ajustar parámetros.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_CONFIGURACION.md">Más detalle</a></div>
      </section>

      <section id="caja-tabs" class="card">
        <h2>Navegación</h2>
        <p>Conmutación entre <strong>Caja</strong> y <strong>Configuración</strong> sin reiniciar la app.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_TABS.md">Más detalle</a></div>
      </section>

      <section id="caja-hoy" class="card">
        <h2>Badge “HOY”</h2>
        <p>Resalta el contenido más reciente para evitar confusiones de fecha.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_caja/CAJA_HOY_BADGE.md">Más detalle</a></div>
      </section>

      <!-- ADMIN -->
      <section id="cfg-mp" class="card">
        <h2>Mercado Pago</h2>
        <p>Configura Access Token, ventana operativa y filtros de búsqueda. Soporta estado único y elección de campo de fecha en español.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_MERCADO_PAGO.md">Más detalle</a></div>
      </section>

      <section id="cfg-email" class="card">
        <h2>Email / SMTP</h2>
        <p>Envía reportes por correo. Validación en vivo del email y control de visibilidad de contraseña.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_EMAIL_SMTP.md">Más detalle</a></div>
      </section>

      <section id="cfg-ftp" class="card">
        <h2>FTP</h2>
        <p>Envío de <code>mp.dbf</code>. Campos proporcionados, toggle de contraseña con icono, alineación 1/3 + 1/3.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_FTP.md">Más detalle</a></div>
      </section>

      <section id="cfg-auto" class="card">
        <h2>Automatización</h2>
        <p>Intervalo, calendario semanal unificado y modo <strong>remoto</strong> autónomo con carpeta disparadora (<code>mp*.txt</code>).</p>
        <div class="btns">
          <a class="btn" target="_blank" href="doc_modo_admin/CONFIG_AUTOMATIZACION.md">Más detalle</a>
          <a class="btn" target="_blank" href="doc_modo_admin/AUTOMATIZACION.md">Explicación extendida</a>
        </div>
      </section>

      <section id="cfg-seg" class="card">
        <h2>Seguridad</h2>
        <p>Cambio de contraseña/usuario/frase secreta con validaciones de calidad. Toggles de visibilidad.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_SEGURIDAD.md">Más detalle</a></div>
      </section>

      <section id="cfg-err" class="card">
        <h2>Notificaciones de Error <span class="badge warn">Nuevo</span></h2>
        <p>Umbrales configurables, estado actual y acciones para limpiar/resetear. Campos se deshabilitan si el feature está apagado.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_NOTIFICACIONES_ERROR.md">Más detalle</a></div>
      </section>

      <section id="cfg-result" class="card">
        <h2>Resultados</h2>
        <p>Listado con filtros, exportación a CSV/XLSX/DBF/JSON y totales en tiempo real.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_RESULTADOS.md">Más detalle</a></div>
      </section>

      <section id="cfg-hist" class="card">
        <h2>Historial</h2>
        <p>Explora archivos generados por fecha. Acceso directo a la carpeta de reportes.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_HISTORIAL.md">Más detalle</a></div>
      </section>

      <section id="cfg-acciones" class="card">
        <h2>Acciones principales</h2>
        <p>Barra de acciones global (cargar, guardar, generar, enviar DBF por FTP, limpiar hash) y vista previa con filtro, copiar, exportar e importar JSON.</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_ACCIONES_PRINCIPALES.md">Más detalle</a></div>
      </section>

      <section id="cfg-about" class="card">
        <h2>Acerca de</h2>
        <p>Datos de contacto y “Notas de versión” agrupadas por versión, leídas desde <code>docs/RELEASE_NOTES.md</code> (solo lectura).</p>
        <div class="btns"><a class="btn" target="_blank" href="doc_modo_admin/CONFIG_ACERCA_DE.md">Más detalle</a></div>
      </section>

      <div class="footer">Manual generado para acompañar las funciones de la aplicación MP. Usa el buscador para encontrar temas rápido. Pulsa <span class="kbd">Ctrl</span>+<span class="kbd">F</span> para búsqueda del navegador.</div>
    </div>
  </main>

  <script>
    const q = document.getElementById('q');
    const nav = document.getElementById('nav');
    q?.addEventListener('input', () => {
      const term = (q.value||'').toLowerCase();
      for (const link of nav.querySelectorAll('a')) {
        const show = !term || link.textContent.toLowerCase().includes(term);
        link.style.display = show ? 'block' : 'none';
      }
    });
  </script>
</body>
</html>


